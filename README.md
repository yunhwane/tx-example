### 💣 트랜잭션의 원자성 (Atomicity) - Bank 예제

✅ 원자성(Atomicity) 이란?
트랜잭션은 모두 성공하거나, 전부 실패해야 한다
즉, 트랜잭션 내 작업은 더 이상 쪼갤 수 없는 하나의 단위로 처리되어야 한다.

🏦 예제 시나리오: 은행 계좌 이체

- A 계좌에서 3,000원 출금

- B 계좌에 3,000원 입금

- 중간에 예외가 발생하면, 전체가 취소되어야 함 (Rollback)


### 결과
- 계좌	잔액 변경	설명

A	10,000 (그대로)	출금 취소됨

B	5,000 (그대로)	입금 시도 안 됨

➡️ 전체 결과	⭕ 완전 취소 (롤백)	

→ 모든 작업이 실패되어 이전 상태 그대로

→ 💪 트랜잭션의 원자성 보장


### 📦 트랜잭션의 일관성 (Consistency) - 주문 & 재고 예제

✅ 일관성(Consistency)이란?
트랜잭션 실행 전과 실행 후, 데이터는 항상 정해진 규칙(제약 조건)을 만족해야 한다.
즉, 잘못된 상태로 DB에 저장되면 안 된다.

🍜 예제 시나리오: 상품 주문
사용자가 상품을 주문하면:

orders 테이블에 주문 정보 저장

items 테이블의 재고를 감소

재고가 부족한 경우, 주문도 저장되지 않아야 함

### ✅ 결과

주문	저장 안됨 ❌

재고	변경 안됨 ❌

결과	⭕ 전체 취소됨, 상태 유지됨


→ 💪 데이터 정합성 유지, 비즈니스 규칙 지켜짐


### 🔐 일관성의 진짜 의미는?
- 비즈니스 규칙이 깨지지 않도록 보장하는 것
예를 들어:

주문했는데 재고가 안 줄었다? ❌

재고가 마이너스가 됐다? ❌

없는 상품에 주문이 들어갔다? ❌

→ 이런 걸 트랜잭션으로 묶어서 절대 깨지지 않게 만드는 게
바로 Consistency 보장
